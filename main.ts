controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (L) {
        animation.runImageAnimation(
        mySprite,
        [img`
            .......222......
            ......22222.....
            ......fff22.....
            ......1ff22.....
            ......ff222.....
            ......22222.....
            .......222c.....
            .......fffc.....
            .......f2fb.....
            .......222b.....
            .......222e.....
            .......222b.....
            .......222b.....
            .......222b.....
            .......f2f......
            .......2f2......
            .......222......
            .......e22......
            .......eee......
            `,img`
            ................
            .......222......
            ......22222.....
            ......fff22.....
            ......1ff22.....
            ......ff222.....
            ......22222.....
            .......222c.....
            .......fffc.....
            .......f2fb.....
            .......222b.....
            .......222e.....
            .......222b.....
            .......222b.....
            .......222b.....
            .......f2f......
            .......2f2......
            .......e22......
            .......eee......
            `,img`
            ................
            ................
            .......222......
            ......22222.....
            ......fff22.....
            ......1ff22.....
            ......ff222.....
            ......22222.....
            .......222c.....
            .......fffc.....
            .......f2fb.....
            .......222b.....
            .......222e.....
            .......222b.....
            .......222b.....
            .......f2f......
            .......2f2......
            .......e22......
            .......eee......
            `,img`
            ................
            .......222......
            ......22222.....
            ......fff22.....
            ......1ff22.....
            ......ff222.....
            ......22222.....
            .......222c.....
            .......fffc.....
            .......f2fb.....
            .......222b.....
            .......222e.....
            .......222b.....
            .......222b.....
            .......222b.....
            .......f2f......
            .......2f2......
            .......e22......
            .......eee......
            `,img`
            .......222......
            ......22222.....
            ......fff22.....
            ......1ff22.....
            ......ff222.....
            ......22222.....
            .......222c.....
            .......fffc.....
            .......f2fb.....
            .......222b.....
            .......222e.....
            .......222b.....
            .......222b.....
            .......222b.....
            .......f2f......
            .......2f2......
            .......222......
            .......e22......
            .......eee......
            `],
        50,
        false
        )
    } else if (R) {
        animation.runImageAnimation(
        mySprite,
        [img`
            ......222.......
            .....22222......
            .....22fff......
            .....22ff1......
            .....222ff......
            .....22222......
            .....c222.......
            .....cfff.......
            .....bf2f.......
            .....b222.......
            .....e222.......
            .....b222.......
            .....b222.......
            .....b222.......
            ......f2f.......
            ......2f2.......
            ......222.......
            ......22e.......
            ......eee.......
            `,img`
            ................
            ......222.......
            .....22222......
            .....22fff......
            .....22ff1......
            .....222ff......
            .....22222......
            .....c222.......
            .....cfff.......
            .....bf2f.......
            .....b222.......
            .....e222.......
            .....b222.......
            .....b222.......
            .....b222.......
            ......f2f.......
            ......2f2.......
            ......22e.......
            ......eee.......
            `,img`
            ................
            ................
            ......222.......
            .....22222......
            .....22fff......
            .....22ff1......
            .....222ff......
            .....22222......
            .....c222.......
            .....cfff.......
            .....bf2f.......
            .....b222.......
            .....e222.......
            .....b222.......
            .....b222.......
            ......f2f.......
            ......2f2.......
            ......22e.......
            ......eee.......
            `,img`
            ................
            ......222.......
            .....22222......
            .....22fff......
            .....22ff1......
            .....222ff......
            .....22222......
            .....c222.......
            .....cfff.......
            .....bf2f.......
            .....b222.......
            .....e222.......
            .....b222.......
            .....b222.......
            .....b222.......
            ......f2f.......
            ......2f2.......
            ......22e.......
            ......eee.......
            `,img`
            ......222.......
            .....22222......
            .....22fff......
            .....22ff1......
            .....222ff......
            .....22222......
            .....c222.......
            .....cfff.......
            .....bf2f.......
            .....b222.......
            .....e222.......
            .....b222.......
            .....b222.......
            .....b222.......
            ......f2f.......
            ......2f2.......
            ......222.......
            ......22e.......
            ......eee.......
            `],
        50,
        false
        )
    } else {
        animation.runImageAnimation(
        mySprite,
        [img`
            ................
            ......2222......
            .....222222.....
            .....ff22ff.....
            .....f1221f.....
            .....ff22ff.....
            ...c.222222.c...
            ....c.2222.c....
            ...f2ffffff2f...
            ..ff22f22222ff..
            ..2f.22fe22.f2..
            ..2f.f222ff.f2..
            ..f.bf2222fb.f..
            .....22..22.....
            .....ff..ff.....
            .....ef..fe.....
            .....22..22.....
            .....2e..e2.....
            .....ee..ee.....
            `,img`
            ................
            ................
            ......2222......
            .....222222.....
            .....ff22ff.....
            .....f1221f.....
            .....ff22ff.....
            ...c.222222.c...
            ....c.2222.c....
            ...f2ffffff2f...
            ..ff22f22222ff..
            ..2f.22fe22.f2..
            ..2f.f222ff.f2..
            ..f.bf2222fb.f..
            .....22..22.....
            .....ff..ff.....
            .....ef..fe.....
            .....2e..e2.....
            .....ee..ee.....
            `,img`
            ................
            ......2222......
            .....222222.....
            .....ff22ff.....
            .....f1221f.....
            .....ff22ff.....
            ...c.222222.c...
            ....c.2222.c....
            ...f2ffffff2f...
            ..ff22f22222ff..
            ..2f.22fe22.f2..
            ..2f.f222ff.f2..
            ..f.bf2222fb.f..
            .....22..22.....
            .....ff..ff.....
            .....ef..fe.....
            .....22..22.....
            .....2e..e2.....
            .....ee..ee.....
            `,img`
            ......2222......
            .....222222.....
            .....ff22ff.....
            .....f1221f.....
            .....ff22ff.....
            ...c.222222.c...
            ....c.2222.c....
            ...f2ffffff2f...
            ..ff22f22222ff..
            ..2f.22fe22.f2..
            ..22.22efe2.22..
            ..2f.f222ff.f2..
            ..f.bf2222fb.f..
            .....22..22.....
            .....ff..ff.....
            .....ef..fe.....
            .....22..22.....
            .....2e..e2.....
            .....ee..ee.....
            `,img`
            ......2222......
            .....222222.....
            .....ff22ff.....
            .....f1221f.....
            .....ff22ff.....
            ...c.222222.c...
            ....c.2222.c....
            ...f2ffffff2f...
            ..ff22f22222ff..
            ..2f.22fe22.f2..
            ..22.22efe2.22..
            ..2f.f222ff.f2..
            ..f.bf2222fb.f..
            .....22..22.....
            .....ef..fe.....
            .....22..22.....
            .....2e..e2.....
            .....ee..ee.....
            ................
            `,img`
            ......2222......
            .....222222.....
            .....ff22ff.....
            .....f1221f.....
            .....ff22ff.....
            ...c.222222.c...
            ....c.2222.c....
            ...f2ffffff2f...
            ..ff22f22222ff..
            ..2f.22fe22.f2..
            ..22.22efe2.22..
            ..2f.f222ff.f2..
            ..f.bf2222fb.f..
            .....22..22.....
            .....ff..ff.....
            .....ef..fe.....
            .....22..22.....
            .....2e..e2.....
            .....ee..ee.....
            `],
        50,
        false
        )
    }
    mySprite.vy = -200
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    L = true
    R = false
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    L = false
    R = true
})
let R = false
let L = false
let mySprite: Sprite = null
scene.setBackgroundColor(13)
mySprite = sprites.create(img`
    ......2222......
    .....222222.....
    .....ff22ff.....
    .....f1221f.....
    .....ff22ff.....
    ...c.222222.c...
    ....c.2222.c....
    ...f2ffffff2f...
    ..ff22f22222ff..
    ..2f.22fe22.f2..
    ..22.22efe2.22..
    ..2f.f222ff.f2..
    ..f.bf2222fb.f..
    .....22..22.....
    .....ff..ff.....
    .....ef..fe.....
    .....22..22.....
    .....2e..e2.....
    .....ee..ee.....
    `, SpriteKind.Player)
controller.moveSprite(mySprite, 100, 0)
mySprite.ay = 300
tiles.setTilemap(tilemap`level1`)
scene.cameraFollowSprite(mySprite)
game.onUpdate(function () {
    if (character.matchesRule(mySprite, character.rule(Predicate.NotMoving))) {
        timer.after(1500, function () {
            if (character.matchesRule(mySprite, character.rule(Predicate.NotMoving))) {
                character.loopFrames(
                mySprite,
                [img`
                    ......2222......
                    .....222222.....
                    .....ff22ff.....
                    .....f1221f.....
                    .....ff22ff.....
                    ...c.222222.c...
                    ....c.2222.c....
                    ...f2ffffff2f...
                    ..ff22f22222ff..
                    ..2f.22fe22.f2..
                    ..22.22efe2.22..
                    ..2f.f222ff.f2..
                    ..f.bf2222fb.f..
                    .....22..22.....
                    .....ff..ff.....
                    .....ef..fe.....
                    .....22..22.....
                    .....2e..e2.....
                    .....ee..ee.....
                    `,img`
                    ................
                    ......2222......
                    .....222222.....
                    .....ff22ff.....
                    .....f1221f.....
                    .....ff22ff.....
                    ...c.222222.c...
                    ....c.2222.c....
                    ...f2ffffff2f...
                    ..ff22f22222ff..
                    ..2f.22fe22.f2..
                    ..22.22efe2.22..
                    ..2f.f222ff.f2..
                    ..f.bf2222fb.f..
                    .....ff..ff.....
                    .....ef..fe.....
                    .....22..22.....
                    .....2e..e2.....
                    .....ee..ee.....
                    `],
                500,
                character.rule(Predicate.NotMoving)
                )
            }
        })
    }
})
